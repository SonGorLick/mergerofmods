stellar_mass_injector_0 = {
    #the one the event spawns, automatically upgrades to the proper class
    entity = "stellar_mass_injector_0"
    construction_entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    potential = {
        always = no
    }
    possible = {
        always = no
    }
    on_build_complete = { #checks the star class and spawns the proper base (i copied this from Gigas, idk how it works or why there's so many froms)
        fromfrom.planet = { set_planet_flag = has_megastructure }
        if = {        limit = { fromfrom.planet = { is_planet_class = pc_b_star } }            spawn_megastructure = { type = "stellar_mass_injector_b_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_m_giant_star } }        spawn_megastructure = { type = "stellar_mass_injector_m_giant_0"    owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_a_star } }            spawn_megastructure = { type = "stellar_mass_injector_a_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_f_star } }            spawn_megastructure = { type = "stellar_mass_injector_f_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_g_star } }            spawn_megastructure = { type = "stellar_mass_injector_g_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_k_star } }            spawn_megastructure = { type = "stellar_mass_injector_k_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_m_star } }            spawn_megastructure = { type = "stellar_mass_injector_m_0"            owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
        else_if = {    limit = { fromfrom.planet = { is_planet_class = pc_gigaignited_star } }    spawn_megastructure = { type = "stellar_mass_injector_ignited_0"    owner = from coords_from = fromfrom.planet } remove_megastructure = fromfrom }
    }
}
##############################################################
#####################auto upgrading bases#####################
##############################################################
stellar_mass_injector_ignited_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_ignited_0
                }
                upgrade_megastructure_to = stellar_mass_injector_ignited_1
            }
        }
    }
}
stellar_mass_injector_b_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_b_0
                }
                upgrade_megastructure_to = stellar_mass_injector_b_1
            }
        }
    }
}
stellar_mass_injector_m_giant_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_m_giant_0
                }
                upgrade_megastructure_to = stellar_mass_injector_m_giant_1
            }
        }
    }
}
stellar_mass_injector_a_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_a_0
                }
                upgrade_megastructure_to = stellar_mass_injector_a_1
            }
        }
    }
}
stellar_mass_injector_f_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_f_0
                }
                upgrade_megastructure_to = stellar_mass_injector_f_1
            }
        }
    }
}
stellar_mass_injector_g_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_g_0
                }
                upgrade_megastructure_to = stellar_mass_injector_g_1
            }
        }
    }
}
stellar_mass_injector_k_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_k_0
                }
                upgrade_megastructure_to = stellar_mass_injector_k_1
            }
        }
    }
}
stellar_mass_injector_m_0 = {
    entity = "construction_platform_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = no
    build_time = 0
    upgrade_from = {
        stellar_mass_injector_0
    }
    on_build_complete = {
        space_owner = {
            every_owned_megastructure = {
                limit = {
                    is_megastructure_type = stellar_mass_injector_m_0
                }
                upgrade_megastructure_to = stellar_mass_injector_m_1
            }
        }
    }
}
######################################################
#####################actual megas#####################
######################################################
stellar_mass_injector_ignited_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_ignited_0
    }
    build_time = 3000
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 1750
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_b_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_b_0
    }
    build_time = 1350
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 875
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_m_giant_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_m_giant_0
    }
    build_time = 1200
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 700
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_a_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_a_0
    }
    build_time = 900
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 525
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_f_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_f_0
    }
    build_time = 750
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 437
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_g_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_g_0
    }
    build_time = 600
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 350
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_k_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_k_0
    }
    build_time = 450
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 262
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
stellar_mass_injector_m_1 = {
    entity = "stellar_mass_injector_entity"
    portrait = "GFX_megastructure_construction_background"
    potential = {always = no}
    place_entity_on_planet_plane = yes
    upgrade_from = {
        stellar_mass_injector_m_0
    }
    build_time = 300
    possible = {
        from = {
            has_technology = tech_stellar_manip_injector
        }
    }
    resources = {
        category = megastructures
        upkeep = {
            energy = 175
        }
    }
    on_build_complete = {
        space_owner = {
            every_controlled_planet = {
                limit = {
                    is_star = yes
                    has_planet_flag = injecting_star
                }
                planet_event = { id = star_manip.104 }
            }
        }
    }
}
