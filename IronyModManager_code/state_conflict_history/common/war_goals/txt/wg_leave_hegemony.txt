wg_leave_hegemony = {
    casus_belli = cb_secession
    hide_if_no_cb = yes
    set_defender_wargoal = wg_assert_hegemony
    allowed_peace_offers = {
        status_quo
        surrender
        demand_surrender
    }
    potential = {
        or = {
            is_ai = no
            years_passed > @str_ai_will_not_declare_war_until
        }
    }
    possible = {
        always = yes
    }
    on_status_quo = {
        custom_tooltip = wg_leave_hegemony_status_quo
        hidden_effect = {
            leave_alliance = {
                override_requirements = yes
            }
            if = {
                limit = {
                    from = {
                        federation = {
                            check_variable = {
                                which = federation_secession_war
                                value > 0
                            }
                        }
                    }
                }
                from = {
                    federation = {
                        change_variable = {
                            which = federation_secession_war
                            value = -1
                        }
                    }
                }
            }
        }
    }
    on_accept = {
        custom_tooltip = wg_leave_hegemony_accept
        hidden_effect = {
            leave_alliance = {
                override_requirements = yes
            }
            every_system_within_border = {
                limit = {
                    from = {
                        has_claim = prev
                    }
                }
                remove_claims = {
                    who = from
                }
            }
            if = {
                limit = {
                    from = {
                        federation = {
                            check_variable = {
                                which = federation_secession_war
                                value > 0
                            }
                        }
                    }
                }
                from = {
                    federation = {
                        change_variable = {
                            which = federation_secession_war
                            value = -1
                        }
                    }
                }
            }
        }
    }
    on_wargoal_set = {
        every_system_within_border = {
            limit = {
                NOT = {
                    from = {
                        has_claim = prev
                    }
                }
            }
            add_claims = {
                who = from
            }
        }
        from = {
            federation = {
                change_variable = {
                    which = federation_secession_war
                    value = 1
                }
            }
        }
        remove_country_flag = asked_to_leave_hegemony
        leave_alliance = {
            override_requirements = yes
        }
        if = {
            limit = {
                has_opinion_modifier = {
                    who = from
                    modifier = opinion_denied_to_leave_hegemony
                }
            }
            remove_opinion_modifier = {
                who = from
                modifier = opinion_denied_to_leave_hegemony
            }
        }
        if = {
            limit = {
                from = {
                    has_opinion_modifier = {
                        who = root
                        modifier = opinion_wanted_to_leave_hegemony
                    }
                }
            }
            from = {
                remove_opinion_modifier = {
                    who = root
                    modifier = opinion_wanted_to_leave_hegemony
                }
            }
        }
    }
    ai_weight = {
        weight = 10
    }
}